{"ast":null,"code":"import { takeLatest, put } from \"redux-saga/effects\";\nimport { VERIFY_TOKEN_REQUEST, verifyTokenRequestSuccess, verifyTokenRequestFailure, FETCH_USER_INFO_REQUEST, fetchUserInfoSuccess, fetchUserInfoFailure } from \"../actions/auth\";\nimport { get, post } from \"../lib/api\";\n\nfunction* verifyTokenRequest(action) {\n  var r = yield post(\"v1/verifyToken\", JSON.stringify({\n    token: action.token,\n    role: action.role\n  })).then(function (json) {\n    return put(verifyTokenRequestSuccess(json));\n  })[\"catch\"](function (err) {\n    return put(verifyTokenRequestFailure(err));\n  });\n  yield r;\n}\n\nfunction* fetchUserInfo() {\n  var r = yield get(\"v1/fetchUserInfo\").then(function (json) {\n    return put(fetchUserInfoSuccess(json));\n  })[\"catch\"](function (err) {\n    return put(fetchUserInfoFailure(err));\n  });\n  yield r;\n}\n\nexport default function* authSaga() {\n  yield takeLatest(VERIFY_TOKEN_REQUEST, verifyTokenRequest);\n  yield takeLatest(FETCH_USER_INFO_REQUEST, fetchUserInfo);\n}","map":{"version":3,"sources":["/Users/gary/dev/simpatico/interfaces/web/home/src/sagas/auth.js"],"names":["takeLatest","put","VERIFY_TOKEN_REQUEST","verifyTokenRequestSuccess","verifyTokenRequestFailure","FETCH_USER_INFO_REQUEST","fetchUserInfoSuccess","fetchUserInfoFailure","get","post","verifyTokenRequest","action","r","JSON","stringify","token","role","then","json","err","fetchUserInfo","authSaga"],"mappings":"AAAA,SAASA,UAAT,EAAqBC,GAArB,QAAgC,oBAAhC;AACA,SACEC,oBADF,EAEEC,yBAFF,EAGEC,yBAHF,EAIEC,uBAJF,EAKEC,oBALF,EAMEC,oBANF,QAOO,iBAPP;AAQA,SAASC,GAAT,EAAcC,IAAd,QAA0B,YAA1B;;AAEA,UAAUC,kBAAV,CAA6BC,MAA7B,EAAqC;AACnC,MAAMC,CAAC,GAAG,MAAMH,IAAI,CAClB,gBADkB,EAElBI,IAAI,CAACC,SAAL,CAAe;AACbC,IAAAA,KAAK,EAAEJ,MAAM,CAACI,KADD;AAEbC,IAAAA,IAAI,EAAEL,MAAM,CAACK;AAFA,GAAf,CAFkB,CAAJ,CAObC,IAPa,CAOR,UAAAC,IAAI;AAAA,WAAIjB,GAAG,CAACE,yBAAyB,CAACe,IAAD,CAA1B,CAAP;AAAA,GAPI,WAQP,UAAAC,GAAG;AAAA,WAAIlB,GAAG,CAACG,yBAAyB,CAACe,GAAD,CAA1B,CAAP;AAAA,GARI,CAAhB;AASA,QAAMP,CAAN;AACD;;AAED,UAAUQ,aAAV,GAA0B;AACxB,MAAMR,CAAC,GAAG,MAAMJ,GAAG,CAAC,kBAAD,CAAH,CACbS,IADa,CACR,UAAAC,IAAI;AAAA,WAAIjB,GAAG,CAACK,oBAAoB,CAACY,IAAD,CAArB,CAAP;AAAA,GADI,WAEP,UAAAC,GAAG;AAAA,WAAIlB,GAAG,CAACM,oBAAoB,CAACY,GAAD,CAArB,CAAP;AAAA,GAFI,CAAhB;AAGA,QAAMP,CAAN;AACD;;AAED,eAAe,UAAUS,QAAV,GAAqB;AAClC,QAAMrB,UAAU,CAACE,oBAAD,EAAuBQ,kBAAvB,CAAhB;AACA,QAAMV,UAAU,CAACK,uBAAD,EAA0Be,aAA1B,CAAhB;AACD","sourcesContent":["import { takeLatest, put } from \"redux-saga/effects\";\nimport {\n  VERIFY_TOKEN_REQUEST,\n  verifyTokenRequestSuccess,\n  verifyTokenRequestFailure,\n  FETCH_USER_INFO_REQUEST,\n  fetchUserInfoSuccess,\n  fetchUserInfoFailure\n} from \"../actions/auth\";\nimport { get, post } from \"../lib/api\";\n\nfunction* verifyTokenRequest(action) {\n  const r = yield post(\n    \"v1/verifyToken\",\n    JSON.stringify({\n      token: action.token,\n      role: action.role\n    })\n  )\n    .then(json => put(verifyTokenRequestSuccess(json)))\n    .catch(err => put(verifyTokenRequestFailure(err)));\n  yield r;\n}\n\nfunction* fetchUserInfo() {\n  const r = yield get(\"v1/fetchUserInfo\")\n    .then(json => put(fetchUserInfoSuccess(json)))\n    .catch(err => put(fetchUserInfoFailure(err)));\n  yield r;\n}\n\nexport default function* authSaga() {\n  yield takeLatest(VERIFY_TOKEN_REQUEST, verifyTokenRequest);\n  yield takeLatest(FETCH_USER_INFO_REQUEST, fetchUserInfo);\n}\n"]},"metadata":{},"sourceType":"module"}